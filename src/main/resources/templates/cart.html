<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" id="top">
<head th:replace="common/fragments :: head"></head>
<body class="container-fluid p-0 m-0 content-wrapper">
  <nav th:replace="common/fragments :: secondary-navigation"></nav>
  <!-- Cart Content -->
  <main class="row g-0 p-0 py-3 px-1 px-sm-3">
    <div class="col-lg-8 col-12">
      <!-- Cart Product -->
      <div class="cart-offer d-flex w-100 mb-2" th:each="item : ${cartItems}">
        <label class="px-2 d-flex align-items-center cart-check-option">
          <input type="checkbox" class="form-check-input" name="productSelector">
        </label>
        <div class="flex-grow-1 p-2">
          <div class="offer-seller mb-2 d-flex align-items-center">
            <img th:src="${item.sellerProfilePicture}" class="seller-profile-image" alt="#">
            <p class="m-0 ms-2 fw-bold" th:text="${item.sellerUsername}">Seller name</p>
          </div>
          <a th:href="@{/offers/{id}/details(id = ${item.id})}" class="d-flex offer-link offer-title m-0 mx-2 mb-2" th:text="${item.title}">Offer title</a>
          <div class="offer-link d-flex flex-column flex-sm-row mb-2">
            <div class="product-images-wrapper d-flex flex-nowrap mb-2">
              <div class="product-images-previewer d-flex justify-content-between">
                <button type="button" class="d-flex justify-content-center align-items-center" th:classappend="${(item.offerImages.size() > 1) ? '' : 'd-none'}" disabled><i class="fas fa-chevron-left"></i></button>
                <button type="button" class="d-flex justify-content-center align-items-center" th:classappend="${(item.offerImages.size() > 1) ? '' : 'd-none'}"><i class="fas fa-chevron-right"></i></button>
              </div>
              <div class="ratio ratio-1x1 product-image" th:each="imgName : *{item.offerImages}">
                <img th:src="@{/headingImage/{name}(name = ${imgName})}" alt="#">
              </div>
            </div>
            <th:block th:if="${item.optionValue != null}">
              <div class="cart-option ms-3 d-flex flex-grow-1">
                <div class="cart-option-selected">
                  <div class="ratio ratio-1x1">
                    <img th:src="@{/optionImage/{id}(id = ${item.optionKey})}" alt="#">
                  </div>
                </div>
                <div class="m-0 fw-bold d-flex flex-grow-1 justify-content-center align-items-center" th:text="${item.optionValue}">Option text</div>
              </div>
            </th:block>
          </div>
          <div class="d-flex flex-column flex-sm-row align-items-sm-center justify-content-sm-between">
            <p class="offer-price fw-bold m-sm-0">$<span th:text="${item.price}"></span></p>
            <div class="input-group offer-quantity">
              <div class="input-group-text">Quantity</div>
              <button class="btn btn-secondary"><i class="fas fa-minus"></i></button>
              <input type="number" class="form-control text-center" name="offerQuantity" min="1" value="1">
              <button class="btn btn-secondary"><i class="fas fa-plus"></i></button>
            </div>
          </div>
        </div>
      </div>
      <!-- Cart Product END -->
    </div>
    <div class="col-lg-4 ps-lg-3 col-12">
      <div class="cart-checkout p-2">
        <div class="pb-2">
          <p class="mb-2">Delivery address</p>
          <label th:each="address : ${deliveryAddresses}" class="shipping-address-option mb-2 p-2 d-flex align-items-center">
            <div class="me-2">
              <input type="radio" name="deliveryAddress" th:value="${address.id}">
            </div>
            <p class="m-0 p-0" th:text="|${address.country}, ${address.postalCode}, ${address.city}, ${address.street}|">Bulgaria, Sofia, bul. Ivan Malinov N24 apartment 4 floor 4</p>
          </label>
        </div>
        <div class="seller-redeem-code p-2">
          <div class="seller mb-2 p-2">
            <div class="offer-seller mb-2 d-flex align-items-center">
              <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fcdn.pixabay.com%2Fphoto%2F2018%2F01%2F28%2F15%2F31%2Fportrait-3113948_640.jpg&f=1&nofb=1" class="seller-profile-image" alt="#">
              <p class="m-0 ms-2 fw-bold">Seller name</p>
            </div>
            <div class="offers mb-2">
              <div class="offer-price-preview">
                <p class="m-0">Offer title 1</p>
                <p class="offer-price fw-bold m-sm-0">$150 000.99</p>
              </div>
              <div class="offer-price-preview">
                <p class="m-0">Offer title 2</p>
                <p class="offer-price fw-bold m-sm-0">$150 000.99</p>
              </div>
              <div class="offer-price-preview">
                <p class="m-0">Offer title 3</p>
                <p class="offer-price fw-bold m-sm-0">$150 000.99</p>
              </div>
            </div>
            <div class="input-group">
              <input type="text" class="form-control" name="promoCode" placeholder="Promo code">
              <button type="button" class="btn btn-secondary">Redeem</button>
            </div>
          </div>
        </div>
        <h4 class="mt-4">Total: <b>$1 000 000.99</b></h4>
        <button class="mt-3 btn btn-primary btn-lg col-12">Make Order</button>
      </div>
    </div>
  </main>
</body>
</html>